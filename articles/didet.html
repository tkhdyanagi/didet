<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="didet">
<title>Getting Started with the didet Package • didet</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with the didet Package">
<meta property="og:description" content="didet">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">didet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/didet.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/review.html">Review of An Effective Treatment Approach to Difference-in-Differences with General Treatment Patterns</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting Started with the didet Package</h1>
                        <h4 data-toc-skip class="author">Takahide Yanagi
(<a href="mailto:yanagi@econ.kyoto-u.ac.jp" class="email">yanagi@econ.kyoto-u.ac.jp</a>)</h4>
            
      
      
      <div class="d-none name"><code>didet.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <strong>didet</strong> package provides tools for
differences-in-differences (DiD) estimation when the treatment variable
of interest may be non-binary and its value may change in each time
period. The package implements the doubly robust estimation of the
average treatment effect for movers using the concept of effective
treatment. The methods are developed by <a href="https://doi.org/10.48550/arXiv.2212.13226" class="external-link">Yanagi (2023) “An
effective treatment approach to difference-in-differences with general
treatment patterns”</a>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Get the package from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools") # if necessary</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"tkhdyanagi/didet"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="package-function">Package Function<a class="anchor" aria-label="anchor" href="#package-function"></a>
</h2>
<p>The <strong>didet</strong> package provides the following
function:</p>
<ul>
<li>
<code><a href="../reference/didet.html">didet()</a></code>: DiD estimation with general treatment patterns
using the concept of effective treatment.</li>
</ul>
<div class="section level4">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h4>
<p>The <code><a href="../reference/didet.html">didet()</a></code> function has the following arguments:</p>
<ul>
<li>
<code>yname</code>: The name of the outcome variable</li>
<li>
<code>dname</code>: The name of the treatment variable</li>
<li>
<code>tname</code>: The name of the time period</li>
<li>
<code>idname</code>: The name of the unit index</li>
<li>
<code>xformla</code>: A formula for the unit-specific covariates to
be included. It should be of the form <code>xformla = ~ X + Z</code>.
Default is <code>xformla = ~ 1</code>.</li>
<li>
<code>data</code>: A data.frame of balanced panel data (long
format)</li>
<li>
<code>specification</code>: A character specifying the effective
treatment function. Options are “once”, “event”, “number”, and
“aggregate”. Default is “event”.</li>
<li>
<code>alp</code>: The significance level. Default is 0.05.</li>
<li>
<code>nboot</code>: The number of bootstrap repetitions. Default is
1000.</li>
</ul>
</div>
<div class="section level4">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a>
</h4>
<p>The <code><a href="../reference/didet.html">didet()</a></code> function returns a list that contains the
following elements:</p>
<ul>
<li>
<code>ATEM</code>: A data.frame that collects the estimation results
for <span class="math inline">\(\mathrm{ATEM}(t, s, e)\)</span> and
<span class="math inline">\(\mathrm{ATEM}(t, s, r, e)\)</span>.</li>
<li>
<code>mover</code>: A data.frame that collects the estimation
results for the probabilities of being movers.</li>
<li>
<code>stayer</code>: A data.frame that collects the estimation
results for the probabilities of being stayers.</li>
<li>
<code>figure</code>: A list that contains the ggplot2 figures for
<span class="math inline">\(\mathrm{ATEM}(t,s,e)\)</span> and <span class="math inline">\(\mathrm{ATEM}(t, s, r, e)\)</span>.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>We begin by generating artificial balanced panel data using the
<code><a href="../reference/datageneration.html">datageneration()</a></code> function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate artificial balanced panel data</span></span>
<span><span class="co"># N: The number of the cross-sectional units</span></span>
<span><span class="co"># S: The length of the time series</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">didet</span><span class="fu">::</span><span class="fu"><a href="../reference/datageneration.html">datageneration</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fl">1000</span>, S <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id period          Y D          X once event number</span></span>
<span><span class="co">#&gt; 1  1      1 -0.1819699 0 -0.6264538    0     0      0</span></span>
<span><span class="co">#&gt; 2  1      2  2.2096505 1 -0.6264538    1     2      1</span></span>
<span><span class="co">#&gt; 3  1      3  1.4318668 0 -0.6264538    1     2      1</span></span>
<span><span class="co">#&gt; 4  1      4  2.8392303 1 -0.6264538    1     2      2</span></span>
<span><span class="co">#&gt; 5  2      1 -0.6832054 0  0.1836433    0     0      0</span></span>
<span><span class="co">#&gt; 6  2      2  4.9496969 0  0.1836433    0     0      0</span></span></code></pre></div>
<div class="section level4">
<h4 id="the-event-specification">The <em>event</em> specification<a class="anchor" aria-label="anchor" href="#the-event-specification"></a>
</h4>
<p>The DiD estimation using the <em>event</em> specification:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DiD estimation</span></span>
<span><span class="va">did_est</span> <span class="op">&lt;-</span> <span class="fu">didet</span><span class="fu">::</span><span class="fu"><a href="../reference/didet.html">didet</a></span><span class="op">(</span>yname <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>                        dname <span class="op">=</span> <span class="st">"D"</span>,</span>
<span>                        tname <span class="op">=</span> <span class="st">"period"</span>,</span>
<span>                        idname <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                        xformla <span class="op">=</span> <span class="op">~</span> <span class="va">X</span>,</span>
<span>                        data <span class="op">=</span> <span class="va">data</span>,</span>
<span>                        specification <span class="op">=</span> <span class="st">"event"</span>,</span>
<span>                        alp <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>                        nboot <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
<p>The ATEM estimation results are:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DiD estimation</span></span>
<span><span class="va">did_est</span><span class="op">$</span><span class="va">ATEM</span></span>
<span><span class="co">#&gt;   t s  r e          est        SE        CIL       CIU</span></span>
<span><span class="co">#&gt; 1 2 1 NA 2  0.657302600 0.1722136  0.1723468 1.1422584</span></span>
<span><span class="co">#&gt; 2 3 1 NA 2  1.235559338 0.1910280  0.6976221 1.7734966</span></span>
<span><span class="co">#&gt; 3 4 1 NA 2  1.240879514 0.2869105  0.4329359 2.0488231</span></span>
<span><span class="co">#&gt; 4 3 2  2 3  0.006868939 0.1764401 -0.4899886 0.5037265</span></span>
<span><span class="co">#&gt; 5 3 2 NA 3  1.174624991 0.1943357  0.6273731 1.7218769</span></span>
<span><span class="co">#&gt; 6 4 2 NA 3  1.173320326 0.2377890  0.5037034 1.8429372</span></span>
<span><span class="co">#&gt; 7 4 3  2 4 -0.075686385 0.2099782 -0.6669878 0.5156151</span></span>
<span><span class="co">#&gt; 8 4 3  3 4 -0.184022148 0.2355352 -0.8472922 0.4792479</span></span>
<span><span class="co">#&gt; 9 4 3 NA 4  0.996096640 0.2571780  0.2718800 1.7203132</span></span></code></pre></div>
<p>The rows with <code>r</code> equal to <code>NA</code> present the
estimation results for <span class="math inline">\(\mathrm{ATEM}(t, s,
e)\)</span>, that is, the estimation results for “post-treatment
periods”. For example, the first row shows the estimation results for
<span class="math inline">\(\mathrm{ATEM}(2, 1, 2)\)</span>, the average
treatment effect in period 2 (<span class="math inline">\(t =
2\)</span>) for movers who are comparison units in period <span class="math inline">\(1\)</span> (<span class="math inline">\(s =
1\)</span>) and whose event date is period 2 (<span class="math inline">\(e = 2\)</span>). The rows with <code>r</code>
unequal to <code>NA</code> correspond to the estimation results for
<span class="math inline">\(\mathrm{ATEM}(t, s, r, e)\)</span>, that is,
the estimation results for “pre-treatment periods”, which should be
approximately 0 under the parallel trends assumption.</p>
<p>The resulting figures are:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Event date = 2</span></span>
<span><span class="va">did_est</span><span class="op">$</span><span class="va">figure</span><span class="op">$</span><span class="va">e2</span></span></code></pre></div>
<p><img src="didet_files/figure-html/unnamed-chunk-6-1.png" width="720"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Event date = 3</span></span>
<span><span class="va">did_est</span><span class="op">$</span><span class="va">figure</span><span class="op">$</span><span class="va">e3</span></span></code></pre></div>
<p><img src="didet_files/figure-html/unnamed-chunk-6-2.png" width="720"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Event date = 4</span></span>
<span><span class="va">did_est</span><span class="op">$</span><span class="va">figure</span><span class="op">$</span><span class="va">e4</span></span></code></pre></div>
<p><img src="didet_files/figure-html/unnamed-chunk-6-3.png" width="720"></p>
<p>In these figures, the circles/squares and bars correspond to the ATEM
estimates and <span class="math inline">\(1 - \alpha\)</span> uniform
confidence bands, with the x-axis indicating the time period <span class="math inline">\(t\)</span>.</p>
</div>
<div class="section level4">
<h4 id="the-once-specification">The <em>once</em> specification<a class="anchor" aria-label="anchor" href="#the-once-specification"></a>
</h4>
<p>The DiD estimation using the <em>once</em> specification:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DiD estimation</span></span>
<span><span class="va">did_est</span> <span class="op">&lt;-</span> <span class="fu">didet</span><span class="fu">::</span><span class="fu"><a href="../reference/didet.html">didet</a></span><span class="op">(</span>yname <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>                        dname <span class="op">=</span> <span class="st">"D"</span>,</span>
<span>                        tname <span class="op">=</span> <span class="st">"period"</span>,</span>
<span>                        idname <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                        xformla <span class="op">=</span> <span class="op">~</span> <span class="va">X</span>,</span>
<span>                        data <span class="op">=</span> <span class="va">data</span>,</span>
<span>                        specification <span class="op">=</span> <span class="st">"once"</span>,</span>
<span>                        alp <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>                        nboot <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
<p>The ATEM estimation results are:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DiD estimation</span></span>
<span><span class="va">did_est</span><span class="op">$</span><span class="va">ATEM</span></span>
<span><span class="co">#&gt;   t s  r e       est        SE       CIL      CIU</span></span>
<span><span class="co">#&gt; 1 2 1 NA 1 0.6573026 0.1626075 0.2683060 1.046299</span></span>
<span><span class="co">#&gt; 2 3 1 NA 1 1.2173456 0.1593353 0.8361769 1.598514</span></span>
<span><span class="co">#&gt; 3 4 1 NA 1 1.1711503 0.2263077 0.6297673 1.712533</span></span></code></pre></div>
<p>The resulting figure is:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">did_est</span><span class="op">$</span><span class="va">figure</span><span class="op">$</span><span class="va">e1</span></span></code></pre></div>
<p><img src="didet_files/figure-html/unnamed-chunk-9-1.png" width="720"></p>
</div>
<div class="section level4">
<h4 id="the-number-specification">The <em>number</em> specification<a class="anchor" aria-label="anchor" href="#the-number-specification"></a>
</h4>
<p>The DiD estimation using the <em>number</em> specification:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DiD estimation</span></span>
<span><span class="va">did_est</span> <span class="op">&lt;-</span> <span class="fu">didet</span><span class="fu">::</span><span class="fu"><a href="../reference/didet.html">didet</a></span><span class="op">(</span>yname <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>                        dname <span class="op">=</span> <span class="st">"D"</span>,</span>
<span>                        tname <span class="op">=</span> <span class="st">"period"</span>,</span>
<span>                        idname <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                        xformla <span class="op">=</span> <span class="op">~</span> <span class="va">X</span>,</span>
<span>                        data <span class="op">=</span> <span class="va">data</span>,</span>
<span>                        specification <span class="op">=</span> <span class="st">"number"</span>,</span>
<span>                        alp <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>                        nboot <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
<p>The ATEM estimation results are:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DiD estimation</span></span>
<span><span class="va">did_est</span><span class="op">$</span><span class="va">ATEM</span></span>
<span><span class="co">#&gt;   t s  r e       est        SE       CIL      CIU</span></span>
<span><span class="co">#&gt; 1 2 1 NA 1 0.6573026 0.1686379 0.2142356 1.100370</span></span>
<span><span class="co">#&gt; 2 3 1 NA 1 1.1656749 0.1657341 0.7302370 1.601113</span></span>
<span><span class="co">#&gt; 3 4 1 NA 1 0.8323819 0.1951119 0.3197590 1.345005</span></span>
<span><span class="co">#&gt; 4 3 1 NA 2 1.2696071 0.2119726 0.7126857 1.826529</span></span>
<span><span class="co">#&gt; 5 4 1 NA 2 1.3969331 0.2810274 0.6585820 2.135284</span></span>
<span><span class="co">#&gt; 6 4 1 NA 3 1.1196405 0.3190303 0.2814431 1.957838</span></span></code></pre></div>
<p>The resulting figures are:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Number of treatment adoptions = 1</span></span>
<span><span class="va">did_est</span><span class="op">$</span><span class="va">figure</span><span class="op">$</span><span class="va">e1</span></span></code></pre></div>
<p><img src="didet_files/figure-html/unnamed-chunk-12-1.png" width="720"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Number of treatment adoptions = 2</span></span>
<span><span class="va">did_est</span><span class="op">$</span><span class="va">figure</span><span class="op">$</span><span class="va">e2</span></span></code></pre></div>
<p><img src="didet_files/figure-html/unnamed-chunk-12-2.png" width="720"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Number of treatment adoptions = 3</span></span>
<span><span class="va">did_est</span><span class="op">$</span><span class="va">figure</span><span class="op">$</span><span class="va">e3</span></span></code></pre></div>
<p><img src="didet_files/figure-html/unnamed-chunk-12-3.png" width="720"></p>
<p>In the last two figures, the estimation results for <span class="math inline">\(t = 2\)</span> and <span class="math inline">\(t
\in \{ 2, 3 \}\)</span> are suppressed because no units experienced the
two and three times of treatment adoptions in these time periods.</p>
</div>
<div class="section level4">
<h4 id="aggregation">Aggregation<a class="anchor" aria-label="anchor" href="#aggregation"></a>
</h4>
<p>We can obtain a single aggregation estimate by taking the time series
mean of the ATEM estimates obtained from the <em>once</em>
specification, as follows:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DiD estimation</span></span>
<span><span class="va">did_est</span> <span class="op">&lt;-</span> <span class="fu">didet</span><span class="fu">::</span><span class="fu"><a href="../reference/didet.html">didet</a></span><span class="op">(</span>yname <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>                        dname <span class="op">=</span> <span class="st">"D"</span>,</span>
<span>                        tname <span class="op">=</span> <span class="st">"period"</span>,</span>
<span>                        idname <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                        xformla <span class="op">=</span> <span class="op">~</span> <span class="va">X</span>,</span>
<span>                        data <span class="op">=</span> <span class="va">data</span>,</span>
<span>                        specification <span class="op">=</span> <span class="st">"aggregate"</span>,</span>
<span>                        alp <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>                        nboot <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
<p>The ATEM estimation results are:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DiD estimation</span></span>
<span><span class="va">did_est</span><span class="op">$</span><span class="va">ATEM</span></span>
<span><span class="co">#&gt;    t  s  r e      est       SE       CIL     CIU</span></span>
<span><span class="co">#&gt; 1 NA NA NA 1 1.015266 0.124448 0.7722924 1.25824</span></span></code></pre></div>
<p>No figure is available in this case.</p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>Yanagi, T., 2023. An effective treatment approach to
difference-in-differences with general treatment patterns. arXiv
preprint arXiv:2212.13226. <a href="https://doi.org/10.48550/arXiv.2212.13226" class="external-link">Link</a>
</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Takahide Yanagi.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
